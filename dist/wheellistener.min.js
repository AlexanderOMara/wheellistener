/*!
 * wheellistener
 * @version 1.1.0
 * @author Alexander O'Mara
 * @copyright Copyright (c) 2015 Alexander O'Mara
 * @license MPL 2.0 <http://mozilla.org/MPL/2.0/>
 */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.wheellistener=t()}("undefined"!=typeof window?window:this,function(){"use strict";function e(e){return e.uniqueNumber||""+e}function t(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||(t.document?t:null)}function n(e){if(!p){var t=e.document,n=t.createElement("p"),l="onwheel"in n?"wheel":"onmousewheel"in n?"mousewheel":"DOMMouseScroll",r=t.implementation;r&&"wheel"!==l&&r.hasFeature&&r.hasFeature("Events.wheel","3.0")&&!r.hasFeature("Events."+w,"3.0")&&(l="wheel"),p={eventListener:!!e.addEventListener,eventToBind:l,shim:"wheel"!==l}}return p}function l(e,t,n){if(e.indexOf)return e.indexOf(t,n||0);for(var l=n||0,r=e.length;r>l;++l)if(e[l]===t)return l;return-1}function r(e){this.originalEvent=e;for(var t=D;t--;){var n=S[t];this[n]=n in e?e[n]:T[n]}this.type="wheel",this.button=0,this.detail=0,this.which=1;var l;"mousewheel"===e.type?(this.deltaY=-1/40*e.wheelDelta,"wheelDeltaX"in e&&(this.deltaX=-1/40*e.wheelDeltaX)):e.axis&&(l=[0,"X","Y","Z"][e.axis])?(this.deltaX=this.deltaY=this.deltaZ=0,this["delta"+l]=e.detail):this.deltaY=e.detail,"MozMousePixelScroll"===e.type&&(this.deltaMode=0);var r=e.target;if(r&&3===r.nodeType)for(;r=r.parentNode||r.parentElement;)if(3!==r){this.target=r;break}}function i(e,t,n){t.triggering=!0;for(var r,i=-1,a=t.length;++i<a;)if(null!==(r=t[i])){if(n[y]){delete n[y];break}r.call(e,n)}for(n[y]&&delete n[y],t.triggering=!1,i=0;(i=l(t,null,i))>-1;)t.splice(i,1)}function a(e,t,n){var l;t===g?(l=m,l.currentTarget=l.originalEvent.currentTarget,l.eventPhase=l.originalEvent.eventPhase):(g=t,l=m=new r(t)),e===l.target&&(l.eventPhase=2);var a=e[w]+"-"+(n?1:0),o=P[a];i(e,o,l),l.currentTarget=null,l.eventPhase=0,o.length||v(e,n)}function o(e){a(this,e,!1)}function u(e){a(this,e,!0)}function s(){var t=this,n=t.event;if(!n){for(var l=M.length;l--&&(t=M[l],!(n=t.event)););if(!n)return}var a=t.document,o=a.documentElement,u=t[w],s=n.srcElement,v=new r(n);v.target=s,v.view=t,v.timeStamp=(new Date).getTime(),v.pageX=n.clientX+o.scrollLeft,v.pageY=n.clientY+o.scrollTop,v.metaKey=!!n.metaKey;var d=s,c=[];do c.push(d);while(d=d.parentElement);c.push(a,t);for(var f=c.length,p=-1;++p<2&&!n.cancelBubble;){var g=0===p?1:3;c.reverse();for(var m=-1;++m<f&&!n.cancelBubble;){d=c[m];var y,E=u+"-"+e(d)+"-"+(p?0:1);(y=P[E])&&(v.currentTarget=d,v.eventPhase=d===s?2:g,i(d,y,v),v.currentTarget=null,v.eventPhase=0,y.length||h(d,!p))}}}function h(r,i){var a=t(r),o=a[w],u=n(a).eventToBind,h=o+"-"+e(r)+"-"+(i?1:0);if(delete P[h],!P[o]){for(var v=0;(v=l(M,a,v))>-1;)M.splice(v,1);a.document.detachEvent("on"+u,s),delete P[o],a[w]=f}}function v(e,l){var r=t(e),i=n(r).eventToBind;delete P[e[w]+"-"+(l?1:0)],e.removeEventListener(i,l?u:o,l),"DOMMouseScroll"===i&&e.removeEventListener("MozMousePixelScroll",l?u:o,l),P[e[w]+"-"+(l?0:1)]||delete e[w]}function d(r,i,a){var h,v,d=t(r),c=n(d),f=c.eventToBind;if(a=!!a,c.eventListener)c.shim?(v=(r[w]||(r[w]=++E))+"-"+(a?1:0),(h=P[v])||(h=P[v]=[],r.addEventListener(f,a?u:o,a),"DOMMouseScroll"===f&&r.addEventListener("MozMousePixelScroll",a?u:o,a)),l(h,i)<0&&h.push(i)):r.addEventListener(f,i,a);else{var p;(p=d[w])||(p=d[w]=++E,M.push(d),d.document.attachEvent("on"+f,s)),v=p+"-"+e(r)+"-"+(a?1:0),h=P[v]||(P[v]=[]),l(h,i)<0&&(h.push(i),P[p]=(P[p]||0)+1)}}function c(r,i,a){var o,u,s,d=t(r),c=n(d),f=c.eventToBind;if(a=!!a,c.eventListener)c.shim?(u=r[w])&&(u+="-"+(a?1:0),(o=P[u])&&(s=l(o,i))>-1&&(o.triggering?o[s]=null:(o.splice(s,1),o.length||v(r,a)))):r.removeEventListener(f,i,a);else{var p;(p=d[w])&&(u=p+"-"+e(r)+"-"+(a?1:0),(o=P[u])&&(s=l(o,i))>-1&&(--P[p],o.triggering?o[s]=null:(o.splice(s,1),o.length||h(r,a))))}}var f,p,g,m,w="___wheeleventshim___",y=w+"stopImmediatePropagation",E=0,P={},M=[],b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},T={deltaMode:1,deltaX:null,deltaY:null,deltaZ:null,altKey:null,button:0,buttons:null,clientX:null,clientY:null,ctrlKey:null,metaKey:null,offsetX:null,offsetY:null,relatedTarget:null,screenX:null,screenY:null,shiftKey:null,which:1,detail:0,pageX:null,pageY:null,view:null,bubbles:!0,cancelable:!0,currentTarget:null,defaultPrevented:!1,eventPhase:null,target:null,timeStamp:null,type:"wheel"},S=[];for(var X in T)T.hasOwnProperty(X)&&S.push(X);var D=S.length;r.prototype.getModifierState=function(e){var t=this.originalEvent;if(t.getModifierState)return t.getModifierState.apply(t,arguments);var n=b[e];return n?!!t[n]:!1},r.prototype.preventDefault=function(){var e=this.originalEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.defaultPrevented=!0},r.prototype.stopPropagation=function(){var e=this.originalEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},r.prototype.stopImmediatePropagation=function(){var e=this.originalEvent;e.stopImmediatePropagation?e.stopImmediatePropagation():this.stopPropagation(),this[y]=!0};for(var L=D;L--;)r.prototype[S[L]]=null;return{WheelEventShim:r,add:d,remove:c}});